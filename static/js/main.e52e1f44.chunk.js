(this.webpackJsonpnotion=this.webpackJsonpnotion||[]).push([[0],{23:function(t,e,n){t.exports={container:"Layout_container__2n0Rd",content:"Layout_content__3RO9R",menu:"Layout_menu__2w9TM"}},31:function(t,e,n){},39:function(t,e,n){t.exports={block:"BlockView_block__14lQO"}},50:function(t,e,n){},61:function(t,e,n){},76:function(t,e,n){},81:function(t,e,n){"use strict";n.r(e);var o,i,c=n(0),r=n.n(c),a=n(17),l=n.n(a),u=(n(50),n(15)),s=n(9),b=n(35),d=n(36),j=Object.freeze({NONE:0,ERROR:1,WARN:2,INFO:3}),f={log:function(){},warn:function(){},error:function(){}},O=function(){function t(){Object(b.a)(this,t)}return Object(d.a)(t,null,[{key:"reset",value:function(){i=j.INFO,o=f}},{key:"level",get:function(){return i},set:function(t){i=t}},{key:"logger",get:function(){return o},set:function(t){o=t}},{key:"log",value:function(){if(i>=j.INFO){for(var t,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];(t=o).log.apply(t,Object(s.a)(Array.from(n)))}}},{key:"warn",value:function(){if(i>=j.WARN){for(var t,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];(t=o).warn.apply(t,Object(s.a)(Array.from(n)))}}},{key:"error",value:function(){if(i>=j.ERROR){for(var t,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];(t=o).error.apply(t,Object(s.a)(Array.from(n)))}}}]),t}();O.reset();var v=function(t){return""!==t.uri&&t.uri?t.uri:t.id},h=function(t,e){return e.filter((function(e){return e.parentId===t}))},p=function t(e,n){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=n;return o&&(i=i.filter((function(t){return!t.parentId}))),i.map((function(n){return{key:v(n),path:"/note/".concat(v(n)),label:n.title,nodes:t(e,h(n.id,e),!1)}}))},y=n(6),g=n(5),x="createNote",m="editNote",C=n(28),k=(n(56),n(1)),I=function(t){var e=t.tree,n=Object(y.g)(),o=Object(c.useCallback)((function(t){var e=t.path;n.push(e)}),[n]);return Object(k.jsx)(C.a,{data:e,onClickItem:o,hasSearch:e.length>0,children:function(t){var e=t.search,n=t.items;return Object(k.jsx)("div",{children:Object(C.b)({search:e,items:n})})}})},E=function(){var t=Object(g.c)((function(t){return t.note.notes||[]})),e=p(t,t);return console.log(e),Object(k.jsx)(I,{tree:e})},w="ACTIVATE",A="DEACTIVATE",T="DEACTIVATE_ALL",N=function(t){return{type:w,payload:t}},_=function(){return{type:T,payload:null}},L=n(23),D=n.n(L),S=function(t){var e=t.children,n=Object(g.b)();return Object(k.jsxs)("div",{className:D.a.container,children:[Object(k.jsxs)("div",{id:"menu",className:D.a.menu,children:[Object(k.jsx)(P,{size:"small",onClick:function(){n(N(x))},label:"Create new note"}),Object(k.jsx)(E,{})]}),Object(k.jsxs)("div",{id:"content",className:D.a.content,children:[Object(k.jsx)(V,{}),e]})]})},R="CREATE",F="UPDATE",z="DELETE",V=(n(31),function(t){var e=t.title,n=Object(y.h)().pathname,o="",i=/note\/(.+)/i.exec(n);i&&(o=String(i[1]));var c=Object(g.c)((function(t){return t.note.notes.find((function(t){return t.id===o||t.uri===o}))}));!e&&c&&(e=null===c||void 0===c?void 0:c.title);var r=Object(g.b)();return Object(k.jsx)("header",{children:e?Object(k.jsxs)("div",{className:"wrapper",children:[Object(k.jsx)("h1",{children:e}),Object(k.jsx)(P,{size:"small",onClick:function(){r(N(m))},label:"Edit"}),Object(k.jsx)(P,{label:"Delete",onClick:function(){var t;c&&r((t=c.id,{type:z,payload:t}))}})]}):Object(k.jsx)("h1",{children:"Create note to start"})})}),B=n(4),K=n(45),M=(n(61),["primary","size","backgroundColor","label"]),P=function(t){var e=t.primary,n=void 0!==e&&e,o=t.size,i=void 0===o?"medium":o,c=t.backgroundColor,r=t.label,a=Object(K.a)(t,M),l=n?"storybook-button--primary":"storybook-button--secondary";return Object(k.jsx)("button",Object(B.a)(Object(B.a)({type:"button",className:["storybook-button","storybook-button--".concat(i),l].join(" "),style:{backgroundColor:c}},a),{},{children:r}))},q=function(t){var e=t.onChange,n=t.initialContent;return Object(k.jsx)("input",{type:"url",onChange:e,value:n})},H=function(t){var e=t.onChange,n=t.initialContent;return Object(k.jsx)(q,{onChange:e,initialContent:n})},U=n(8),X=n(44),G=function(t){var e,n=t.noteId,o=Object(g.c)((function(t){return t.note.notes.filter((function(t){return t.id===n}))}))[0],i=Object(y.g)(),r=(e=[o],e.map((function(t){return{key:v(t),label:t.title}})))[0],a=Object(c.useCallback)((function(){i.push("/note/".concat(r.key))}),[i,r]);return Object(k.jsx)(P,{label:r.label,onClick:a})},J=function(t){var e=t.onChange,n=Object(g.c)((function(t){return t.note.notes||[]})),o=n.map((function(t){return{value:t.id,label:t.title}})),i=Object(c.useState)(null),r=Object(U.a)(i,2),a=r[0],l=r[1];return Object(k.jsx)(X.a,{defaultValue:a,onChange:function(t){l(t),e((function(){return Object(k.jsx)(G,{noteId:null===t||void 0===t?void 0:t.value})}))},options:o})},W=(n(76),function(t){var e=t.visible,n=void 0!==e&&e,o=t.title,i=void 0===o?"":o,c=t.footer,a=void 0===c?"":c,l=t.onClose,u=t.children,s=function(t){if("Escape"===t.key)l()};return r.a.useEffect((function(){return document.addEventListener("keydown",s),function(){return document.removeEventListener("keydown",s)}})),n?Object(k.jsx)("div",{className:"modal",onClick:l,children:Object(k.jsxs)("div",{className:"modal-dialog",onClick:function(t){return t.stopPropagation()},children:[Object(k.jsxs)("div",{className:"modal-header",children:[Object(k.jsx)("h3",{className:"modal-title",children:i}),Object(k.jsx)("span",{className:"modal-close",onClick:l,children:"\xd7"})]}),Object(k.jsx)("div",{className:"modal-body",children:Object(k.jsx)("div",{className:"modal-content",children:u})}),a&&Object(k.jsx)("div",{className:"modal-footer",children:a})]})}):null}),Q=function(t){var e=t.onChange,n=t.initialContent;return Object(k.jsx)(q,{onChange:e,initialContent:n})},Z=n(22),Y=function(t){var e=t.onChange,n=t.initialContent,o=Object(c.useRef)({}),i=Object(c.useState)(n),r=Object(U.a)(i,2),a=r[0],l=r[1];return Object(k.jsx)(Z.a,{apiKey:"ehq1jfns67gsmeg9xytlhk7prvttajygxma2zi9yxyh3ouxz",onInit:function(t,e){return o.current=e},initialValue:a,onChange:function(t,n){l(n.getContent()),e(a)},init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media paste code help wordcount"],toolbar:"formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})},$=function(t){var e=t.onChange,n=t.initialContent,o=Object(c.useRef)({}),i=Object(c.useState)(n),r=Object(U.a)(i,2),a=r[0],l=r[1];return Object(k.jsx)(Z.a,{apiKey:"ehq1jfns67gsmeg9xytlhk7prvttajygxma2zi9yxyh3ouxz",onInit:function(t,e){return o.current=e},initialValue:"<p>This is the initial content of the editor.</p>",onChange:function(t,n){l(n.getContent()),e(a)},init:{height:500,menubar:"table",plugins:["table"],toolbar:"bold italic backcolor | table tabledelete | tableprops tablerowprops tablecellprops | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})},tt=n(21),et=n.n(tt),nt=function(t){var e,n=t.onFinish,o=t.initialData,i=t.parentId,r=Object(c.useState)(null!==(e=null===o||void 0===o?void 0:o.title)&&void 0!==e?e:""),a=Object(U.a)(r,2),l=a[0],u=a[1],s=Object(c.useState)(null===o||void 0===o?void 0:o.uri),b=Object(U.a)(s,2),d=b[0],j=b[1];return Object(k.jsxs)("form",{onSubmit:function(t){var e;t.preventDefault(),n({title:l,uri:null===d||void 0===d?void 0:d.replace(/[^a-zA-Z0-9]/g,"_").replace(/_{2,}/g,"_"),id:null!==(e=null===o||void 0===o?void 0:o.id)&&void 0!==e?e:et()(),parentId:i})},children:[Object(k.jsx)("div",{children:"Title:"}),Object(k.jsx)("input",{type:"text",name:"title",required:!0,onChange:function(t){return u(t.target.value)}}),Object(k.jsx)("div",{children:"URI:"}),Object(k.jsx)("input",{type:"text",name:"uri",onChange:function(t){return j(t.target.value)}}),Object(k.jsx)("button",{type:"submit",children:"Add"})]})},ot=function(t){var e=t.visible,n=t.onClose,o=t.initialData,i=t.parentId,c=Object(g.c)((function(t){return t.ui.flows.filter((function(t){return t===m}))})).length>0,r=!!(null===o||void 0===o?void 0:o.id)&&c,a=Object(y.g)(),l=Object(g.b)();return Object(k.jsx)(W,{visible:e,title:r?"Edit note":"Create new note",onClose:n,children:Object(k.jsx)(nt,{initialData:r?o:void 0,onFinish:function(t){l(r?{type:F,payload:t}:function(t){return{type:R,payload:t}}(t)),l(_()),a.push("/note/".concat(v(t)))},parentId:i})})},it=n(39),ct=n.n(it),rt=function(t){var e=t.block;return Object(k.jsx)("div",{className:ct.a.block,dangerouslySetInnerHTML:{__html:e.content}})},at=function(t){var e=t.type,n=t.onChange,o=t.initialContent,i=function(t){var e,o;n(null!==(e=null===t||void 0===t||null===(o=t.target)||void 0===o?void 0:o.value)&&void 0!==e?e:t)};switch(e){case"IMAGE":return Object(k.jsx)(H,{onChange:i,initialContent:o});case"LINK":return Object(k.jsx)(J,{onChange:i,initialContent:o});case"TEXT":return Object(k.jsx)(Y,{onChange:i,initialContent:o});case"TABLE":return Object(k.jsx)($,{onChange:i,initialContent:o});case"VIDEO":return Object(k.jsx)(Q,{onChange:i,initialContent:o})}},lt=function(t){var e,n=t.type,o=t.onFinish,i=t.initialData,r=Object(c.useState)(null!==(e=null===i||void 0===i?void 0:i.content)&&void 0!==e?e:""),a=Object(U.a)(r,2),l=a[0],u=a[1];return Object(k.jsxs)("form",{onSubmit:function(t){t.preventDefault(),o(l)},children:[Object(k.jsx)(at,{type:n,onChange:u,initialContent:l}),Object(k.jsx)("button",{type:"submit",children:(null===i||void 0===i?void 0:i.id)?"Save":"Add"})]})},ut=["VIDEO","LINK","TEXT","IMAGE","TABLE"],st=function(t){var e=t.onChange,n=ut.map((function(t){return{value:t,label:String(t).toLowerCase()}}));return Object(k.jsx)("div",{children:n.map((function(t){return Object(k.jsx)(P,{label:t.label,onClick:function(){return function(t){e(t.value)}(t)}})}))})},bt="CREATE_BLOCK",dt="UPDATE_BLOCK",jt="DELETE_BLOCK",ft=function(t){return{type:dt,payload:t}},Ot=function(t,e){return t.order-e.order},vt=function(t){var e=t.noteId,n=Object(g.c)((function(t){return t.block.blocks.filter((function(t){return t.noteId===e}))})),o=Object(g.b)(),i=Object(c.useState)("TEXT"),r=Object(U.a)(i,2),a=r[0],l=r[1],u=Object(c.useState)(!1),s=Object(U.a)(u,2),b=s[0],d=s[1],j=Object(c.useState)(),f=Object(U.a)(j,2),O=f[0],v=f[1],h=function(){return d(!0)},p=function(t,e){var i=e?t.order-1:t.order+1,c=n.find((function(t){return t.order===i}));c&&(o(ft({id:c.id,noteId:c.noteId,type:c.type,content:c.content,order:t.order})),o(ft({id:t.id,noteId:t.noteId,type:t.type,content:t.content,order:i})))},y=function(t){o(function(t){return{type:jt,payload:t}}(t))};return Object(k.jsxs)(k.Fragment,{children:[!b&&Object(k.jsx)(P,{label:"Add new block",onClick:function(){v(void 0),h()}}),b&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(st,{onChange:l}),Object(k.jsx)(lt,{type:a,onFinish:function(t){var i;(null===O||void 0===O?void 0:O.id)?o(ft({id:O.id,noteId:O.noteId,type:O.type,content:t,order:O.order})):o((i={id:et()(),noteId:e,type:a,content:t,order:n.length},{type:bt,payload:i})),d(!1)},initialData:O})]}),n.sort(Ot).map((function(t){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(rt,{block:t}),0!==t.order&&Object(k.jsx)(P,{label:"\u25b2",onClick:function(){return function(t){p(t,!0)}(t)}}),t.order<n.length-1&&Object(k.jsx)(P,{label:"\u25bc",onClick:function(){return function(t){p(t,!1)}(t)}}),Object(k.jsx)(P,{label:"Edit",onClick:function(){return function(t){v(t),h()}(t)}}),Object(k.jsx)(P,{label:"Delete",onClick:function(){return y(t.id)}})]})}))]})},ht=function(){var t=Object(y.h)().pathname,e="",n=/note\/(.+)/i.exec(t);n&&(e=String(n[1]));var o=Object(g.c)((function(t){return t.note.notes.filter((function(t){return t.id===e||t.uri===e}))}))[0],i=Object(g.c)((function(t){return t.ui.flows})).includes(x),c=Object(g.b)();return Object(k.jsxs)("div",{children:[(null===o||void 0===o?void 0:o.id)&&Object(k.jsx)(vt,{noteId:o.id}),Object(k.jsx)(ot,{visible:i,onClose:function(){c(_())},initialData:o,parentId:null===o||void 0===o?void 0:o.id})]})},pt=function(){return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(S,{children:Object(k.jsxs)(y.d,{children:[Object(k.jsx)(y.b,{path:"/",component:ht},"dashboard"),Object(k.jsx)(y.a,{to:"/dashboard"})]})})})},yt=n(40),gt=n(14),xt=n(30),mt=n(41),Ct=n.n(mt),kt=n(42),It=n.n(kt),Et={flows:[]},wt={blocks:[]},At={notes:[]},Tt=Object(gt.b)({note:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case R:return Object(B.a)(Object(B.a)({},t),{},{notes:[].concat(Object(s.a)(t.notes),[Object(B.a)({},e.payload)])});case F:return Object(B.a)(Object(B.a)({},t),{},{notes:[].concat(Object(s.a)(t.notes.filter((function(t){return t.id!==e.payload.id}))),[Object(B.a)({},e.payload)])});case z:return Object(B.a)(Object(B.a)({},t),{},{notes:Object(s.a)(t.notes.filter((function(t){return t.id!==e.payload})))});default:return t}},block:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case bt:return Object(B.a)(Object(B.a)({},t),{},{blocks:[].concat(Object(s.a)(t.blocks),[Object(B.a)({},e.payload)])});case dt:return Object(B.a)(Object(B.a)({},t),{},{blocks:[].concat(Object(s.a)(t.blocks.filter((function(t){return t.id!==e.payload.id}))),[Object(B.a)({},e.payload)])});case jt:return Object(B.a)(Object(B.a)({},t),{},{blocks:Object(s.a)(t.blocks.filter((function(t){return t.id!==e.payload})))});default:return t}},ui:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case w:return Object(B.a)(Object(B.a)({},t),{},{flows:[].concat(Object(s.a)(t.flows),[e.payload])});case A:return Object(B.a)(Object(B.a)({},t),{},{flows:Object(s.a)(t.flows.filter((function(t){return t!==e.payload})))});case T:return Et;default:return t}}}),Nt=n(43),_t=n.n(Nt),Lt={key:"note",storage:Ct.a,stateReconciler:_t.a},Dt=Object(xt.a)(Lt,Tt),St=Object(gt.c)(Dt,Object(gt.a)(It.a)),Rt=Object(xt.b)(St);O.logger=console;var Ft=function(){return Object(k.jsx)(g.a,{store:St,children:Object(k.jsx)(yt.a,{loading:null,persistor:Rt,children:Object(k.jsx)(u.a,{children:Object(k.jsx)(y.d,{children:Object(k.jsx)(y.b,{component:pt})})})})})},zt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,82)).then((function(e){var n=e.getCLS,o=e.getFID,i=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),o(t),i(t),c(t),r(t)}))};l.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(Ft,{})}),document.getElementById("root")),zt()}},[[81,1,2]]]);