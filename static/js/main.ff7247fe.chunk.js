(this.webpackJsonpnotion=this.webpackJsonpnotion||[]).push([[0],{24:function(t,e,n){t.exports={container:"Layout_container__2n0Rd",content:"Layout_content__3RO9R",menu:"Layout_menu__2w9TM"}},32:function(t,e,n){},40:function(t,e,n){t.exports={block:"BlockView_block__14lQO"}},50:function(t,e,n){},61:function(t,e,n){},76:function(t,e,n){},81:function(t,e,n){"use strict";n.r(e);var i,o,c=n(0),r=n.n(c),a=n(17),l=n.n(a),u=(n(50),n(15)),s=n(7),b=n(36),d=n(37),j=Object.freeze({NONE:0,ERROR:1,WARN:2,INFO:3}),f={log:function(){},warn:function(){},error:function(){}},O=function(){function t(){Object(b.a)(this,t)}return Object(d.a)(t,null,[{key:"reset",value:function(){o=j.INFO,i=f}},{key:"level",get:function(){return o},set:function(t){o=t}},{key:"logger",get:function(){return i},set:function(t){i=t}},{key:"log",value:function(){if(o>=j.INFO){for(var t,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];(t=i).log.apply(t,Object(s.a)(Array.from(n)))}}},{key:"warn",value:function(){if(o>=j.WARN){for(var t,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];(t=i).warn.apply(t,Object(s.a)(Array.from(n)))}}},{key:"error",value:function(){if(o>=j.ERROR){for(var t,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];(t=i).error.apply(t,Object(s.a)(Array.from(n)))}}}]),t}();O.reset();var v=function(t){return""!==t.uri&&t.uri?t.uri:t.id},h=n(6),p=n(5),y="createNote",x="editNote",g="createSection",C=n(23),m=n(29),k=(n(56),n(1)),E=["key","label"],I=function(t){var e=t.tree,n=Object(h.g)(),i=Object(c.useCallback)((function(t){var e=t.key,i=(t.label,Object(C.a)(t,E)),o=i.isSection,c=i.path;o?n.push("/section/".concat(e)):n.push("/note/".concat(c))}),[n]);return Object(k.jsx)(m.a,{data:e,onClickItem:i,hasSearch:e.length>0,children:function(t){var e=t.search,n=t.items;return Object(k.jsx)("div",{children:Object(m.b)({search:e,items:n})})}})},w=function(){var t=function(t,e){return t.map((function(t){return{key:t.id,label:t.title,isSection:!0,nodes:e.filter((function(e){return e.sectionId===t.id})).map((function(t){return{key:v(t),label:t.title,path:v(t)}}))}}))}(Object(p.c)((function(t){return t.section.sections||[]})),Object(p.c)((function(t){return t.note.notes||[]})));return Object(k.jsx)(I,{tree:t})},A="ACTIVATE",T="DEACTIVATE",S="DEACTIVATE_ALL",N=function(t){return{type:A,payload:t}},_=function(){return{type:S,payload:null}},D=n(24),L=n.n(D),R=function(t){var e=t.children,n=Object(p.b)();return Object(k.jsxs)("div",{className:L.a.container,children:[Object(k.jsxs)("div",{id:"menu",className:L.a.menu,children:[Object(k.jsx)(P,{size:"small",onClick:function(){n(N(y))},label:"Create new note"}),Object(k.jsx)(P,{size:"small",onClick:function(){n(N(g))},label:"Create new section"}),Object(k.jsx)(w,{})]}),Object(k.jsxs)("div",{id:"content",className:L.a.content,children:[Object(k.jsx)(B,{}),e]})]})},F="CREATE",z="UPDATE",V="DELETE",B=(n(32),function(t){var e=t.title,n=Object(h.h)().pathname,i="",o="",c=/section\/(.+)/i.exec(n);c&&(i=String(c[1]));var r=/note\/(.+)/i.exec(n);r&&(o=String(r[1]));var a=Object(p.c)((function(t){return t.section.sections.find((function(t){return t.id===i}))})),l=Object(p.c)((function(t){return t.note.notes.find((function(t){return t.id===o||t.uri===o}))})),u=Object(p.b)();return e||!l&&!a||(e=(null===l||void 0===l?void 0:l.title)||(null===a||void 0===a?void 0:a.title)),Object(k.jsx)("header",{children:e?Object(k.jsxs)("div",{className:"wrapper",children:[Object(k.jsx)("h1",{children:e}),Object(k.jsx)(P,{size:"small",onClick:function(){u(N(x))},label:"Edit"}),Object(k.jsx)(P,{label:"Delete",onClick:function(){var t;l&&u((t=l.id,{type:V,payload:t}))}})]}):Object(k.jsx)("h1",{children:"Create note to start"})})}),K=n(4),M=(n(61),["primary","size","backgroundColor","label"]),P=function(t){var e=t.primary,n=void 0!==e&&e,i=t.size,o=void 0===i?"medium":i,c=t.backgroundColor,r=t.label,a=Object(C.a)(t,M),l=n?"storybook-button--primary":"storybook-button--secondary";return Object(k.jsx)("button",Object(K.a)(Object(K.a)({type:"button",className:["storybook-button","storybook-button--".concat(o),l].join(" "),style:{backgroundColor:c}},a),{},{children:r}))},H=function(t){var e=t.onChange,n=t.initialContent;return Object(k.jsx)("input",{type:"url",onChange:e,value:n})},U=function(t){var e=t.onChange,n=t.initialContent;return Object(k.jsx)(H,{onChange:e,initialContent:n})},X=n(8),q=n(45),G=function(t){var e,n=t.noteId,i=Object(p.c)((function(t){return t.note.notes.filter((function(t){return t.id===n}))}))[0],o=Object(h.g)(),r=(e=[i],e.map((function(t){return{key:v(t),label:t.title}})))[0],a=Object(c.useCallback)((function(){o.push("/note/".concat(r.key))}),[o,r]);return Object(k.jsx)(P,{label:r.label,onClick:a})},J=function(t){var e=t.onChange,n=Object(p.c)((function(t){return t.note.notes||[]})),i=n.map((function(t){return{value:t.id,label:t.title}})),o=Object(c.useState)(null),r=Object(X.a)(o,2),a=r[0],l=r[1];return Object(k.jsx)(q.a,{defaultValue:a,onChange:function(t){l(t),e((function(){return Object(k.jsx)(G,{noteId:null===t||void 0===t?void 0:t.value})}))},options:i})},W=(n(76),function(t){var e=t.visible,n=void 0!==e&&e,i=t.title,o=void 0===i?"":i,c=t.footer,a=void 0===c?"":c,l=t.onClose,u=t.children,s=function(t){if("Escape"===t.key)l()};return r.a.useEffect((function(){return document.addEventListener("keydown",s),function(){return document.removeEventListener("keydown",s)}})),n?Object(k.jsx)("div",{className:"modal",onClick:l,children:Object(k.jsxs)("div",{className:"modal-dialog",onClick:function(t){return t.stopPropagation()},children:[Object(k.jsxs)("div",{className:"modal-header",children:[Object(k.jsx)("h3",{className:"modal-title",children:o}),Object(k.jsx)("span",{className:"modal-close",onClick:l,children:"\xd7"})]}),Object(k.jsx)("div",{className:"modal-body",children:Object(k.jsx)("div",{className:"modal-content",children:u})}),a&&Object(k.jsx)("div",{className:"modal-footer",children:a})]})}):null}),Q=function(t){var e=t.onChange,n=t.initialContent;return Object(k.jsx)(H,{onChange:e,initialContent:n})},Z=n(22),Y=function(t){var e=t.onChange,n=t.initialContent,i=Object(c.useRef)({}),o=Object(c.useState)(n),r=Object(X.a)(o,2),a=r[0],l=r[1];return Object(k.jsx)(Z.a,{onInit:function(t,e){return i.current=e},initialValue:a,onChange:function(t,n){l(n.getContent()),e(a)},init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media paste code help wordcount"],toolbar:"formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})},$=function(t){var e=t.onChange,n=t.initialContent,i=Object(c.useRef)({}),o=Object(c.useState)(n),r=Object(X.a)(o,2),a=r[0],l=r[1];return Object(k.jsx)(Z.a,{onInit:function(t,e){return i.current=e},initialValue:"<p>This is the initial content of the editor.</p>",onChange:function(t,n){l(n.getContent()),e(a)},init:{height:500,menubar:"table",plugins:["table"],toolbar:"bold italic backcolor | table tabledelete | tableprops tablerowprops tablecellprops | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})},tt=n(18),et=n.n(tt),nt=function(t){var e,n=t.onFinish,i=t.initialData,o=t.sectionId,r=Object(c.useState)(null!==(e=null===i||void 0===i?void 0:i.title)&&void 0!==e?e:""),a=Object(X.a)(r,2),l=a[0],u=a[1],s=Object(c.useState)(null===i||void 0===i?void 0:i.uri),b=Object(X.a)(s,2),d=b[0],j=b[1];return Object(k.jsxs)("form",{onSubmit:function(t){var e;t.preventDefault(),n({title:l,uri:null===d||void 0===d?void 0:d.replace(/[^a-zA-Z0-9]/g,"_").replace(/_{2,}/g,"_"),id:null!==(e=null===i||void 0===i?void 0:i.id)&&void 0!==e?e:et()(),sectionId:o})},children:[Object(k.jsx)("div",{children:"Title:"}),Object(k.jsx)("input",{type:"text",name:"title",required:!0,onChange:function(t){return u(t.target.value)}}),Object(k.jsx)("div",{children:"URI:"}),Object(k.jsx)("input",{type:"text",name:"uri",onChange:function(t){return j(t.target.value)}}),Object(k.jsx)("button",{type:"submit",children:"Add"})]})},it=function(t){var e=t.visible,n=t.onClose,i=t.initialData,o=t.sectionId,c=Object(p.c)((function(t){return t.ui.flows.filter((function(t){return t===x}))})).length>0,r=!!(null===i||void 0===i?void 0:i.id)&&c,a=Object(h.g)(),l=Object(p.b)();return Object(k.jsx)(W,{visible:e,title:r?"Edit note":"Create new note",onClose:n,children:Object(k.jsx)(nt,{initialData:r?i:void 0,onFinish:function(t){l(r?{type:z,payload:t}:function(t){return{type:F,payload:t}}(t)),l(_()),a.push("/note/".concat(v(t)))},sectionId:o})})},ot=n(40),ct=n.n(ot),rt=function(t){var e=t.block;return Object(k.jsx)("div",{className:ct.a.block,dangerouslySetInnerHTML:{__html:e.content}})},at=function(t){var e=t.type,n=t.onChange,i=t.initialContent,o=function(t){var e,i;n(null!==(e=null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)&&void 0!==e?e:t)};switch(e){case"IMAGE":return Object(k.jsx)(U,{onChange:o,initialContent:i});case"LINK":return Object(k.jsx)(J,{onChange:o,initialContent:i});case"TEXT":return Object(k.jsx)(Y,{onChange:o,initialContent:i});case"TABLE":return Object(k.jsx)($,{onChange:o,initialContent:i});case"VIDEO":return Object(k.jsx)(Q,{onChange:o,initialContent:i})}},lt=function(t){var e,n=t.type,i=t.onFinish,o=t.initialData,r=Object(c.useState)(null!==(e=null===o||void 0===o?void 0:o.content)&&void 0!==e?e:""),a=Object(X.a)(r,2),l=a[0],u=a[1];return Object(k.jsxs)("form",{onSubmit:function(t){t.preventDefault(),i(l)},children:[Object(k.jsx)(at,{type:n,onChange:u,initialContent:l}),Object(k.jsx)("button",{type:"submit",children:(null===o||void 0===o?void 0:o.id)?"Save":"Add"})]})},ut=["VIDEO","LINK","TEXT","IMAGE","TABLE"],st=function(t){var e=t.onChange,n=ut.map((function(t){return{value:t,label:String(t).toLowerCase()}}));return Object(k.jsx)("div",{children:n.map((function(t){return Object(k.jsx)(P,{label:t.label,onClick:function(){return function(t){e(t.value)}(t)}})}))})},bt="CREATE_BLOCK",dt="UPDATE_BLOCK",jt="DELETE_BLOCK",ft=function(t){return{type:dt,payload:t}},Ot=function(t,e){return t.order-e.order},vt=function(t){var e=t.noteId,n=Object(p.c)((function(t){return t.block.blocks.filter((function(t){return t.noteId===e}))})),i=Object(p.b)(),o=Object(c.useState)("TEXT"),r=Object(X.a)(o,2),a=r[0],l=r[1],u=Object(c.useState)(!1),s=Object(X.a)(u,2),b=s[0],d=s[1],j=Object(c.useState)(),f=Object(X.a)(j,2),O=f[0],v=f[1],h=function(){return d(!0)},y=function(t,e){var o=e?t.order-1:t.order+1,c=n.find((function(t){return t.order===o}));c&&(i(ft({id:c.id,noteId:c.noteId,type:c.type,content:c.content,order:t.order})),i(ft({id:t.id,noteId:t.noteId,type:t.type,content:t.content,order:o})))},x=function(t){i(function(t){return{type:jt,payload:t}}(t))};return Object(k.jsxs)(k.Fragment,{children:[!b&&Object(k.jsx)(P,{label:"Add new block",onClick:function(){v(void 0),h()}}),b&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(st,{onChange:l}),Object(k.jsx)(lt,{type:a,onFinish:function(t){var o;(null===O||void 0===O?void 0:O.id)?i(ft({id:O.id,noteId:O.noteId,type:O.type,content:t,order:O.order})):i((o={id:et()(),noteId:e,type:a,content:t,order:n.length},{type:bt,payload:o})),d(!1)},initialData:O})]}),n.sort(Ot).map((function(t){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(rt,{block:t}),0!==t.order&&Object(k.jsx)(P,{label:"\u25b2",onClick:function(){return function(t){y(t,!0)}(t)}}),t.order<n.length-1&&Object(k.jsx)(P,{label:"\u25bc",onClick:function(){return function(t){y(t,!1)}(t)}}),Object(k.jsx)(P,{label:"Edit",onClick:function(){return function(t){v(t),h()}(t)}}),Object(k.jsx)(P,{label:"Delete",onClick:function(){return x(t.id)}})]})}))]})},ht=function(t){var e=t.onFinish,n=Object(c.useState)(""),i=Object(X.a)(n,2),o=i[0],r=i[1];return Object(k.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e({title:o,id:et()()}),r("")},children:[Object(k.jsx)("div",{children:"Title:"}),Object(k.jsx)("input",{type:"text",name:"title",required:!0,onChange:function(t){return r(t.target.value)}}),Object(k.jsx)("button",{type:"submit",children:"Add"})]})},pt="CREATE_SECTION",yt="DELETE_SECTION",xt=function(t){var e=t.visible,n=t.onClose,i=Object(p.b)();return Object(k.jsx)(W,{visible:e,title:"Create new section",onClose:n,children:Object(k.jsx)(ht,{onFinish:function(t){i({type:pt,payload:t}),n()}})})},gt=function(t){var e=t.sectionId,n=Object(p.c)((function(t){return t.note.notes.filter((function(t){return t.sectionId===e}))}));return Object(k.jsx)("div",{children:n.map((function(t){return Object(k.jsx)(G,{noteId:t.id})}))})},Ct=function(){var t=Object(h.h)().pathname,e="0",n="",i=/section\/(.+)/i.exec(t);i&&(e=String(i[1]));var o=/note\/(.+)/i.exec(t);o&&(n=String(o[1]));var c=Object(p.c)((function(t){return t.section.sections.filter((function(t){return t.id===e}))}))[0],r=Object(p.c)((function(t){return t.note.notes.filter((function(t){return t.id===n||t.uri===n}))}))[0],a=Object(p.c)((function(t){return t.ui.flows})),l=a.includes(g),u=a.includes(y),s=Object(p.b)(),b=function(){s(_())};return Object(k.jsxs)("div",{children:[(null===r||void 0===r?void 0:r.id)&&Object(k.jsx)(vt,{noteId:r.id}),(null===c||void 0===c?void 0:c.id)&&!(null===r||void 0===r?void 0:r.id)&&Object(k.jsx)(gt,{sectionId:e}),Object(k.jsx)(xt,{visible:l,onClose:b}),Object(k.jsx)(it,{visible:u,onClose:b,initialData:r,sectionId:e})]})},mt=function(){return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(R,{children:Object(k.jsxs)(h.d,{children:[Object(k.jsx)(h.b,{path:"/",component:Ct},"dashboard"),Object(k.jsx)(h.a,{to:"/dashboard"})]})})})},kt=n(41),Et=n(14),It=n(31),wt=n(42),At=n.n(wt),Tt=n(43),St=n.n(Tt),Nt={flows:[]},_t={blocks:[]},Dt={notes:[]},Lt={sections:[{id:"0",title:"other"}]},Rt=Object(Et.b)({note:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case F:return Object(K.a)(Object(K.a)({},t),{},{notes:[].concat(Object(s.a)(t.notes),[Object(K.a)({},e.payload)])});case z:return Object(K.a)(Object(K.a)({},t),{},{notes:[].concat(Object(s.a)(t.notes.filter((function(t){return t.id!==e.payload.id}))),[Object(K.a)({},e.payload)])});case V:return Object(K.a)(Object(K.a)({},t),{},{notes:Object(s.a)(t.notes.filter((function(t){return t.id!==e.payload})))});default:return t}},block:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case bt:return Object(K.a)(Object(K.a)({},t),{},{blocks:[].concat(Object(s.a)(t.blocks),[Object(K.a)({},e.payload)])});case dt:return Object(K.a)(Object(K.a)({},t),{},{blocks:[].concat(Object(s.a)(t.blocks.filter((function(t){return t.id!==e.payload.id}))),[Object(K.a)({},e.payload)])});case jt:return Object(K.a)(Object(K.a)({},t),{},{blocks:Object(s.a)(t.blocks.filter((function(t){return t.id!==e.payload})))});default:return t}},ui:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case A:return Object(K.a)(Object(K.a)({},t),{},{flows:[].concat(Object(s.a)(t.flows),[e.payload])});case T:return Object(K.a)(Object(K.a)({},t),{},{flows:Object(s.a)(t.flows.filter((function(t){return t!==e.payload})))});case S:return Nt;default:return t}},section:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case pt:return Object(K.a)(Object(K.a)({},t),{},{sections:[].concat(Object(s.a)(t.sections),[Object(K.a)({},e.payload)])});case yt:return Object(K.a)(Object(K.a)({},t),{},{sections:Object(s.a)(t.sections.filter((function(t){return t.id!==e.payload})))});default:return t}}}),Ft=n(44),zt=n.n(Ft),Vt={key:"note",storage:At.a,stateReconciler:zt.a},Bt=Object(It.a)(Vt,Rt),Kt=Object(Et.c)(Bt,Object(Et.a)(St.a)),Mt=Object(It.b)(Kt);O.logger=console;var Pt=function(){return Object(k.jsx)(p.a,{store:Kt,children:Object(k.jsx)(kt.a,{loading:null,persistor:Mt,children:Object(k.jsx)(u.a,{children:Object(k.jsx)(h.d,{children:Object(k.jsx)(h.b,{component:mt})})})})})},Ht=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,82)).then((function(e){var n=e.getCLS,i=e.getFID,o=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),i(t),o(t),c(t),r(t)}))};l.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(Pt,{})}),document.getElementById("root")),Ht()}},[[81,1,2]]]);
//# sourceMappingURL=main.ff7247fe.chunk.js.map