(this.webpackJsonpnotion=this.webpackJsonpnotion||[]).push([[0],{25:function(t,e,n){t.exports={container:"Layout_container__2n0Rd",content:"Layout_content__3RO9R",menu:"Layout_menu__2w9TM"}},33:function(t,e,n){},41:function(t,e,n){t.exports={block:"BlockView_block__14lQO"}},50:function(t,e,n){},61:function(t,e,n){},76:function(t,e,n){},81:function(t,e,n){"use strict";n.r(e);var i,c,o=n(0),a=n.n(o),r=n(17),l=n.n(r),u=(n(50),n(15)),s=n(7),b=n(37),j=n(38),d=Object.freeze({NONE:0,ERROR:1,WARN:2,INFO:3}),O={log:function(){},warn:function(){},error:function(){}},f=function(){function t(){Object(b.a)(this,t)}return Object(j.a)(t,null,[{key:"reset",value:function(){c=d.INFO,i=O}},{key:"level",get:function(){return c},set:function(t){c=t}},{key:"logger",get:function(){return i},set:function(t){i=t}},{key:"log",value:function(){if(c>=d.INFO){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];(t=i).log.apply(t,Object(s.a)(Array.from(n)))}}},{key:"warn",value:function(){if(c>=d.WARN){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];(t=i).warn.apply(t,Object(s.a)(Array.from(n)))}}},{key:"error",value:function(){if(c>=d.ERROR){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];(t=i).error.apply(t,Object(s.a)(Array.from(n)))}}}]),t}();f.reset();var v=function(t){return""!==t.uri&&t.uri?t.uri:t.id},h=n(6),p=n(5),x="createNote",y="editNote",g="createSection",C=n(24),m=n(30),k=(n(56),n(1)),E=["key","label"],w=function(t){var e=t.tree,n=Object(h.g)(),i=Object(o.useCallback)((function(t){var e=t.key,i=(t.label,Object(C.a)(t,E)),c=i.isSection,o=i.path;c?n.push("/section/".concat(e)):n.push("/note/".concat(o))}),[n]);return Object(k.jsx)(m.a,{data:e,onClickItem:i,hasSearch:e.length>0,children:function(t){var e=t.search,n=t.items;return Object(k.jsx)("div",{children:Object(m.b)({search:e,items:n})})}})},I=function(){var t=function(t,e){return t.map((function(t){return{key:t.id,label:t.title,isSection:!0,nodes:e.filter((function(e){return e.sectionId===t.id})).map((function(t){return{key:v(t),label:t.title,path:v(t)}}))}}))}(Object(p.c)((function(t){return t.section.sections||[]})),Object(p.c)((function(t){return t.note.notes||[]})));return Object(k.jsx)(w,{tree:t})},A="ACTIVATE",T="DEACTIVATE",S="DEACTIVATE_ALL",N=function(t){return{type:A,payload:t}},D=function(){return{type:S,payload:null}},L=n(25),_=n.n(L),R=function(t){var e=t.children,n=Object(p.b)();return Object(k.jsxs)("div",{className:_.a.container,children:[Object(k.jsxs)("div",{id:"menu",className:_.a.menu,children:[Object(k.jsx)(M,{size:"small",onClick:function(){n(N(x))},label:"Create new note"}),Object(k.jsx)(M,{size:"small",onClick:function(){n(N(g))},label:"Create new section"}),Object(k.jsx)(I,{})]}),Object(k.jsxs)("div",{id:"content",className:_.a.content,children:[Object(k.jsx)(B,{}),e]})]})},F="CREATE",V="UPDATE",z="DELETE",B=(n(33),function(t){var e=t.title,n=Object(h.h)().pathname,i="",c="",o=/section\/(.+)/i.exec(n);o&&(i=String(o[1]));var a=/note\/(.+)/i.exec(n);a&&(c=String(a[1]));var r=Object(p.c)((function(t){return t.section.sections.filter((function(t){return t.id===i}))}))[0],l=Object(p.c)((function(t){return t.note.notes.filter((function(t){return t.id===c||t.uri===c}))}))[0],u=Object(p.b)();return e||!l&&!r||(e=(null===l||void 0===l?void 0:l.title)||(null===r||void 0===r?void 0:r.title)),Object(k.jsx)("header",{children:e?Object(k.jsxs)("div",{className:"wrapper",children:[Object(k.jsx)("h1",{children:e}),Object(k.jsx)(M,{size:"small",onClick:function(){u(N(y))},label:"Edit"}),Object(k.jsx)(M,{label:"Delete",onClick:function(){var t;u((t=l.id,{type:z,payload:t}))}})]}):Object(k.jsx)("h1",{children:"Create note to start"})})}),K=n(4),P=(n(61),["primary","size","backgroundColor","label"]),M=function(t){var e=t.primary,n=void 0!==e&&e,i=t.size,c=void 0===i?"medium":i,o=t.backgroundColor,a=t.label,r=Object(C.a)(t,P),l=n?"storybook-button--primary":"storybook-button--secondary";return Object(k.jsx)("button",Object(K.a)(Object(K.a)({type:"button",className:["storybook-button","storybook-button--".concat(c),l].join(" "),style:{backgroundColor:o}},r),{},{children:a}))},U=function(t){var e=t.onChange,n=t.initialContent;return Object(k.jsx)("input",{type:"url",onChange:e,value:n})},X=function(t){var e=t.onChange,n=t.initialContent;return Object(k.jsx)(U,{onChange:e,initialContent:n})},q=n(8),G=n(22),H=function(t){var e,n=t.noteId,i=Object(p.c)((function(t){return t.note.notes.filter((function(t){return t.id===n}))}))[0],c=Object(h.g)(),a=(e=[i],e.map((function(t){return{key:v(t),label:t.title}})))[0],r=Object(o.useCallback)((function(){c.push("/note/".concat(a.key))}),[c,a]);return Object(k.jsx)(M,{label:a.label,onClick:r})},J=function(t){var e=t.onChange,n=Object(p.c)((function(t){return t.note.notes||[]})),i=n.map((function(t){return{value:t.id,label:t.title}})),c=Object(o.useState)(null),a=Object(q.a)(c,2),r=a[0],l=a[1];return Object(k.jsx)(G.a,{defaultValue:r,onChange:function(t){l(t),e((function(){return Object(k.jsx)(H,{noteId:null===t||void 0===t?void 0:t.value})}))},options:i})},W=(n(76),function(t){var e=t.visible,n=void 0!==e&&e,i=t.title,c=void 0===i?"":i,o=t.footer,r=void 0===o?"":o,l=t.onClose,u=t.children,s=function(t){if("Escape"===t.key)l()};return a.a.useEffect((function(){return document.addEventListener("keydown",s),function(){return document.removeEventListener("keydown",s)}})),n?Object(k.jsx)("div",{className:"modal",onClick:l,children:Object(k.jsxs)("div",{className:"modal-dialog",onClick:function(t){return t.stopPropagation()},children:[Object(k.jsxs)("div",{className:"modal-header",children:[Object(k.jsx)("h3",{className:"modal-title",children:c}),Object(k.jsx)("span",{className:"modal-close",onClick:l,children:"\xd7"})]}),Object(k.jsx)("div",{className:"modal-body",children:Object(k.jsx)("div",{className:"modal-content",children:u})}),r&&Object(k.jsx)("div",{className:"modal-footer",children:r})]})}):null}),Q=function(t){var e=t.onChange,n=t.initialContent;return Object(k.jsx)(U,{onChange:e,initialContent:n})},Y=n(23),Z=function(t){var e=t.onChange,n=t.initialContent,i=Object(o.useRef)({}),c=Object(o.useState)(n),a=Object(q.a)(c,2),r=a[0],l=a[1];return Object(k.jsx)(Y.a,{onInit:function(t,e){return i.current=e},initialValue:r,onChange:function(t,n){l(n.getContent()),e(r)},init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media paste code help wordcount"],toolbar:"formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})},$=function(t){var e=t.onChange,n=t.initialContent,i=Object(o.useRef)({}),c=Object(o.useState)(n),a=Object(q.a)(c,2),r=a[0],l=a[1];return Object(k.jsx)(Y.a,{onInit:function(t,e){return i.current=e},initialValue:"<p>This is the initial content of the editor.</p>",onChange:function(t,n){l(n.getContent()),e(r)},init:{height:500,menubar:"table",plugins:["table"],toolbar:"bold italic backcolor | table tabledelete | tableprops tablerowprops tablecellprops | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})},tt=n(18),et=n.n(tt),nt=function(t){var e,n=t.onFinish,i=t.initialData,c=t.sectionId,a=void 0===c?"0":c,r=Object(o.useState)(null!==(e=null===i||void 0===i?void 0:i.title)&&void 0!==e?e:""),l=Object(q.a)(r,2),u=l[0],s=l[1],b=Object(o.useState)(null===i||void 0===i?void 0:i.uri),j=Object(q.a)(b,2),d=j[0],O=j[1];return Object(k.jsxs)("form",{onSubmit:function(t){var e;t.preventDefault(),n({title:u,uri:d,id:null!==(e=null===i||void 0===i?void 0:i.id)&&void 0!==e?e:et()(),sectionId:a})},children:[Object(k.jsx)("div",{children:"Title:"}),Object(k.jsx)("input",{type:"text",name:"title",required:!0,onChange:function(t){return s(t.target.value)}}),Object(k.jsx)("div",{children:"URI:"}),Object(k.jsx)("input",{type:"text",name:"uri",onChange:function(t){return O(t.target.value)}}),Object(k.jsx)("button",{type:"submit",children:"Add"})]})},it=function(t){var e=t.visible,n=t.onClose,i=t.initialData,c=t.sectionId,o=void 0===c?"0":c,a=Object(p.c)((function(t){return t.ui.flows.filter((function(t){return t===y}))})).length>0,r=!!(null===i||void 0===i?void 0:i.id)&&a,l=Object(h.g)(),u=Object(p.b)();return Object(k.jsx)(W,{visible:e,title:r?"Edit note":"Create new note",onClose:n,children:Object(k.jsx)(nt,{initialData:r?i:void 0,onFinish:function(t){u(r?{type:V,payload:t}:function(t){return{type:F,payload:t}}(t)),u(D()),l.push("/note/".concat(v(t)))},sectionId:o})})},ct=n(41),ot=n.n(ct),at=function(t){var e=t.block;return Object(k.jsx)("div",{className:ot.a.block,children:Object(k.jsx)("div",{children:e.content})})},rt=function(t){var e=t.type,n=t.onChange,i=t.initialContent,c=function(t){var e,i;n(null!==(e=null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value)&&void 0!==e?e:t)};switch(e){case"IMAGE":return Object(k.jsx)(X,{onChange:c,initialContent:i});case"LINK":return Object(k.jsx)(J,{onChange:c,initialContent:i});case"TEXT":return Object(k.jsx)(Z,{onChange:c,initialContent:i});case"TABLE":return Object(k.jsx)($,{onChange:c,initialContent:i});case"VIDEO":return Object(k.jsx)(Q,{onChange:c,initialContent:i})}},lt=function(t){var e,n=t.type,i=t.onFinish,c=t.initialData,a=Object(o.useState)(null!==(e=null===c||void 0===c?void 0:c.content)&&void 0!==e?e:""),r=Object(q.a)(a,2),l=r[0],u=r[1];return Object(k.jsxs)("form",{onSubmit:function(t){t.preventDefault(),i(l)},children:[Object(k.jsx)(rt,{type:n,onChange:u,initialContent:l}),Object(k.jsx)("button",{type:"submit",children:(null===c||void 0===c?void 0:c.id)?"Save":"Add"})]})},ut=["VIDEO","LINK","TEXT","IMAGE","TABLE"],st=function(t){var e=t.onChange,n=t.defaultValue,i=ut.map((function(t){return{value:t,label:String(t).toLowerCase()}})),c={value:n,label:String(n).toLowerCase()};return Object(k.jsx)(G.a,{defaultValue:c,onChange:function(t){e(t.value)},options:i})},bt="CREATE_BLOCK",jt="UPDATE_BLOCK",dt="DELETE_BLOCK",Ot=function(t){var e=t.noteId,n=Object(p.c)((function(t){return t.block.blocks.filter((function(t){return t.noteId===e}))})),i=Object(p.b)(),c=Object(o.useState)("TEXT"),a=Object(q.a)(c,2),r=a[0],l=a[1],u=Object(o.useState)(!1),s=Object(q.a)(u,2),b=s[0],j=s[1],d=Object(o.useState)(),O=Object(q.a)(d,2),f=O[0],v=O[1],h=function(){return j(!0)},x=function(t){i(function(t){return{type:dt,payload:t}}(t))};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(M,{label:"Add new block",onClick:h}),b&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(st,{onChange:l,defaultValue:r}),Object(k.jsx)(lt,{type:r,onFinish:function(t){var n;(null===f||void 0===f?void 0:f.id)?i((n={id:f.id,noteId:f.noteId,type:f.type,content:t,order:0},{type:jt,payload:n})):i(function(t){return{type:bt,payload:t}}({id:et()(),noteId:e,type:r,content:t,order:0})),j(!1)},initialData:f})]}),n.map((function(t){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(at,{block:t}),Object(k.jsx)(M,{label:"Edit",onClick:function(){return function(t){v(t),h()}(t)}}),Object(k.jsx)(M,{label:"Delete",onClick:function(){return x(t.id)}})]})}))]})},ft=function(t){var e=t.onFinish,n=Object(o.useState)(""),i=Object(q.a)(n,2),c=i[0],a=i[1];return Object(k.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e({title:c,id:et()()}),a("")},children:[Object(k.jsx)("div",{children:"Title:"}),Object(k.jsx)("input",{type:"text",name:"title",required:!0,onChange:function(t){return a(t.target.value)}}),Object(k.jsx)("button",{type:"submit",children:"Add"})]})},vt="CREATE_SECTION",ht="DELETE_SECTION",pt=function(t){var e=t.visible,n=t.onClose,i=Object(p.b)();return Object(k.jsx)(W,{visible:e,title:"Create new section",onClose:n,children:Object(k.jsx)(ft,{onFinish:function(t){i({type:vt,payload:t}),n()}})})},xt=function(){return Object(k.jsx)("div",{})},yt=function(){var t=Object(h.h)().pathname,e="",n="",i=/section\/(.+)/i.exec(t);i&&(e=String(i[1]));var c=/note\/(.+)/i.exec(t);c&&(n=String(c[1]));var o=Object(p.c)((function(t){return t.section.sections.filter((function(t){return t.id===e}))}))[0],a=Object(p.c)((function(t){return t.note.notes.filter((function(t){return t.id===n||t.uri===n}))}))[0],r=Object(p.c)((function(t){return t.ui.flows})),l=r.includes(g),u=r.includes(x),s=Object(p.b)(),b=function(){s(D())};return Object(k.jsxs)("div",{children:[(null===a||void 0===a?void 0:a.id)&&Object(k.jsx)(Ot,{noteId:a.id}),(null===o||void 0===o?void 0:o.id)&&Object(k.jsx)(xt,{}),Object(k.jsx)(pt,{visible:l,onClose:b}),Object(k.jsx)(it,{visible:u,onClose:b,initialData:a,sectionId:e})]})},gt=function(){return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(R,{children:Object(k.jsxs)(h.d,{children:[Object(k.jsx)(h.b,{path:"/",component:yt},"dashboard"),Object(k.jsx)(h.a,{to:"/dashboard"})]})})})},Ct=n(42),mt=n(14),kt=n(32),Et=n(43),wt=n.n(Et),It=n(44),At=n.n(It),Tt={flows:[]},St={blocks:[]},Nt={notes:[]},Dt={sections:[{id:"0",title:"other"}]},Lt=Object(mt.b)({note:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case F:return Object(K.a)(Object(K.a)({},t),{},{notes:[].concat(Object(s.a)(t.notes),[Object(K.a)({},e.payload)])});case V:return Object(K.a)(Object(K.a)({},t),{},{notes:[].concat(Object(s.a)(t.notes.filter((function(t){return t.id!==e.payload.id}))),[Object(K.a)({},e.payload)])});case z:return Object(K.a)(Object(K.a)({},t),{},{notes:Object(s.a)(t.notes.filter((function(t){return t.id!==e.payload})))});default:return t}},block:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case bt:return Object(K.a)(Object(K.a)({},t),{},{blocks:[].concat(Object(s.a)(t.blocks),[Object(K.a)({},e.payload)])});case jt:return Object(K.a)(Object(K.a)({},t),{},{blocks:[].concat(Object(s.a)(t.blocks.filter((function(t){return t.id!==e.payload.id}))),[Object(K.a)({},e.payload)])});case dt:return Object(K.a)(Object(K.a)({},t),{},{blocks:Object(s.a)(t.blocks.filter((function(t){return t.id!==e.payload})))});default:return t}},ui:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case A:return Object(K.a)(Object(K.a)({},t),{},{flows:[].concat(Object(s.a)(t.flows),[e.payload])});case T:return Object(K.a)(Object(K.a)({},t),{},{flows:Object(s.a)(t.flows.filter((function(t){return t!==e.payload})))});case S:return Tt;default:return t}},section:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case vt:return Object(K.a)(Object(K.a)({},t),{},{sections:[].concat(Object(s.a)(t.sections),[Object(K.a)({},e.payload)])});case ht:return Object(K.a)(Object(K.a)({},t),{},{sections:Object(s.a)(t.sections.filter((function(t){return t.id!==e.payload})))});default:return t}}}),_t=n(45),Rt=n.n(_t),Ft={key:"note",storage:wt.a,stateReconciler:Rt.a},Vt=Object(kt.a)(Ft,Lt),zt=Object(mt.c)(Vt,Object(mt.a)(At.a)),Bt=Object(kt.b)(zt);f.logger=console;var Kt=function(){return Object(k.jsx)(p.a,{store:zt,children:Object(k.jsx)(Ct.a,{loading:null,persistor:Bt,children:Object(k.jsx)(u.a,{children:Object(k.jsx)(h.d,{children:Object(k.jsx)(h.b,{component:gt})})})})})},Pt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,82)).then((function(e){var n=e.getCLS,i=e.getFID,c=e.getFCP,o=e.getLCP,a=e.getTTFB;n(t),i(t),c(t),o(t),a(t)}))};l.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(Kt,{})}),document.getElementById("root")),Pt()}},[[81,1,2]]]);
//# sourceMappingURL=main.e0eb7241.chunk.js.map